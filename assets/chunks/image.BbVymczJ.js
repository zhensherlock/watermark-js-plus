import{i as s,W as i,r as a,c as o}from"./index.B_48g37t.js";class e{constructor(t={}){this.drew=!1,this.props=t,this.options={...s,...t},this.props.crossOrigin&&this.props.dom?.setAttribute("crossOrigin","anonymous"),this.watermarkCanvas=new i(this.props,this.options),this.originalSrc=this.props.dom?.src,this.backgroundImage=this.getBackgroundImage()}async create(){this.drew||(await this.watermarkCanvas?.draw(),this.options.layout="grid",this.options.gridLayoutOptions={...this.options.gridLayoutOptions,width:this.backgroundImage?.width,height:this.backgroundImage?.height,backgroundImage:this.backgroundImage},this.layoutCanvas=a(this.options,this.watermarkCanvas?.getCanvas()),this.options.dom.src=o(this.layoutCanvas),this.watermarkCanvas?.clear(),this.drew=!0)}destroy(){this.options.dom.src=this.originalSrc,this.drew=!1}getBackgroundImage(){if(this.options.dom)return this.options.dom}}export{e as I};
