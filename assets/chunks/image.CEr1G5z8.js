import{i as o,W as e,r as n,c as h}from"./index.CCX9E3L5.js";class p{constructor(s={}){var t,a;this.drew=!1,this.props=s,this.options={...o,...s},this.props.crossOrigin&&((t=this.props.dom)==null||t.setAttribute("crossOrigin","anonymous")),this.watermarkCanvas=new e(this.props,this.options),this.originalSrc=(a=this.props.dom)==null?void 0:a.src,this.backgroundImage=this.getBackgroundImage()}async create(){var s,t,a,i,r;this.drew||(await((s=this.watermarkCanvas)==null?void 0:s.draw()),this.options.layout="grid",this.options.gridLayoutOptions={...this.options.gridLayoutOptions,width:(t=this.backgroundImage)==null?void 0:t.width,height:(a=this.backgroundImage)==null?void 0:a.height,backgroundImage:this.backgroundImage},this.layoutCanvas=n(this.options,(i=this.watermarkCanvas)==null?void 0:i.getCanvas()),this.options.dom.src=h(this.layoutCanvas),(r=this.watermarkCanvas)==null||r.clear(),this.drew=!0)}destroy(){this.options.dom.src=this.originalSrc,this.drew=!1}getBackgroundImage(){if(this.options.dom)return this.options.dom}}const d="/watermark-js-plus/assets/image.BDuqOd6r.png";export{p as I,d as i};
